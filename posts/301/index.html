<!doctype html><html lang=en><head><title>gdb调试使用 · Hd's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="shuiyuehd"><meta name=description content="Hd's personal website"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="gdb调试使用"><meta name=twitter:description content><meta property="og:title" content="gdb调试使用"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://blog.shuiyuehd.cn/posts/301/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-26T00:00:00+00:00"><meta property="og:see_also" content="https://blog.shuiyuehd.cn/posts/300/"><meta property="og:see_also" content="https://blog.shuiyuehd.cn/posts/205/"><meta property="og:see_also" content="https://blog.shuiyuehd.cn/posts/206/"><link rel=canonical href=https://blog.shuiyuehd.cn/posts/301/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.78b5fe3864945faf5207fb8fe3ab2320d49c3365def0e88ac1df0ddadc54a03c.css integrity="sha256-eLX+OGSUX69SB/uP46sjINScM2Xe8OiKwd8N2txUoDw=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/css/custom.min.5ee0ad9e8f1b17d7a2309a71c69cb872e2afd31d618222760117de63b651a440.css integrity="sha256-XuCtno8bF9eiMJpxxpy4cuKv0x1hgiJ2ARfeY7ZRpEA=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/custom.min.85f403ff232218bd8e612424d1885bb4d57fd440764fa75faecb6ceb511c75b4.css integrity="sha256-hfQD/yMiGL2OYSQk0YhbtNV/1EB2T6dfrsts61EcdbQ=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.105.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Hd's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://blog.shuiyuehd.cn/posts/301/>gdb调试使用</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2022-04-26T00:00:00Z>2022-04-26</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
18-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/gdb/>gdb</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/kernel/>kernel</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/gdb/>gdb</a></span></div></div></header><div><hr><h2 id=启动gdb调试>启动GDB调试
<a class=heading-link href=#%e5%90%af%e5%8a%a8gdb%e8%b0%83%e8%af%95><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>一般来说，GDB主要有四个方面的功能：</p><blockquote><p>1、按照自定义的方式启动运行需要调试的程序。
2、可以使用指定位置和条件表达式的方式来设置断点。
3、程序暂停时的值的监视。
4、动态改变程序的执行环境。</p></blockquote><p>GCC编译器的常用选项</p><blockquote><p>-g：产生符号调试工具(GNU 的 gdb)所必要的符号信息，要想对源代码进行调试，我们就必须加入这个选项，<strong><code>-g</code><strong>默认为</strong><code>-g2</code></strong>。</p></blockquote><table><thead><tr><th>选项</th><th>描述</th></tr></thead><tbody><tr><td>g1</td><td>级别1（-g1）不包含局部变量和与行号有关的调试信息，因此只能够用于回溯跟踪和堆栈转储之用。回溯跟踪指的是监视程序在运行过程中的函数调用历史，堆栈转储则是一种以原始的十六进制格式保存程序执行环境的方法，两者都是经常用到的调试手段</td></tr><tr><td>g2</td><td>这是默认的级别，此时产生的调试信息包括扩展的符号表、行号、局部或外部变量信息</td></tr><tr><td>g3</td><td>包含级别2中的所有调试信息，以及源代码中定义的宏</td></tr></tbody></table><blockquote><p>-O：对程序进行优化编译、链接，采用这个选项，整个源代码会在编译、链接过程中进行优化处理，这样产 生的可执行文件的执行效率可以提高，但是，编译、链接的速度就相应地要慢一些。
-O2：比-O 更好的优化编译、链接，当然整个编译、链接过程会更慢。</p></blockquote><h2 id=gdb指令说明>GDB指令说明
<a class=heading-link href=#gdb%e6%8c%87%e4%bb%a4%e8%af%b4%e6%98%8e><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>root@baolong:~/gdb_test# gdb --help
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>This is the GNU debugger.  Usage:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    gdb <span style=color:#ff79c6>[</span>options<span style=color:#ff79c6>]</span> <span style=color:#ff79c6>[</span>executable-file <span style=color:#ff79c6>[</span>core-file or process-id<span style=color:#ff79c6>]]</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    gdb <span style=color:#ff79c6>[</span>options<span style=color:#ff79c6>]</span> --args executable-file <span style=color:#ff79c6>[</span>inferior-arguments ...<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>Selection of debuggee and its files:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>❗ --args             Arguments after executable-file are passed to inferior
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>❗  --core<span style=color:#ff79c6>=</span>COREFILE    Analyze the core dump COREFILE.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  --exec<span style=color:#ff79c6>=</span>EXECFILE    Use EXECFILE as the executable.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>❗  --pid<span style=color:#ff79c6>=</span>PID          Attach to running process PID.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  --directory<span style=color:#ff79c6>=</span>DIR    Search <span style=color:#ff79c6>for</span> <span style=color:#8be9fd;font-style:italic>source</span> files in DIR.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  --se<span style=color:#ff79c6>=</span>FILE          Use FILE as symbol file and executable file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>  --symbols<span style=color:#ff79c6>=</span>SYMFILE  Read symbols from SYMFILE.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>  --readnow          Fully <span style=color:#8be9fd;font-style:italic>read</span> symbol files on first access.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>  --readnever        Do not <span style=color:#8be9fd;font-style:italic>read</span> symbol files.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>  --write            Set writing into executable and core files.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>Initial commands and <span style=color:#8be9fd;font-style:italic>command</span> files:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>  --command<span style=color:#ff79c6>=</span>FILE, -x Execute GDB commands from FILE.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>  --init-command<span style=color:#ff79c6>=</span>FILE, -ix
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>                     Like -x but execute commands before loading inferior.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>  --eval-command<span style=color:#ff79c6>=</span>COMMAND, -ex
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>                     Execute a single GDB command.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>                     May be used multiple <span style=color:#8be9fd;font-style:italic>times</span> and in conjunction
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>                     with --command.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>  --init-eval-command<span style=color:#ff79c6>=</span>COMMAND, -iex
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>                     Like -ex but before loading inferior.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>  --nh               Do not <span style=color:#8be9fd;font-style:italic>read</span> ~/.gdbinit.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>  --nx               Do not <span style=color:#8be9fd;font-style:italic>read</span> any .gdbinit files in any directory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>Output and user interface control:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>  --fullname         Output information used by emacs-GDB interface.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>  --interpreter<span style=color:#ff79c6>=</span>INTERP
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>                     Select a specific interpreter / user interface
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>  --tty<span style=color:#ff79c6>=</span>TTY          Use TTY <span style=color:#ff79c6>for</span> input/output by the program being debugged.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>  -w                 Use the GUI interface.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>  --nw               Do not use the GUI interface.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>  --dbx              DBX compatibility mode.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>❗  -q, --quiet, --silent
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span>                     Do not print version number on startup.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span>Operating modes:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span>  --batch            Exit after processing options.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span>  --batch-silent     Like --batch, but suppress all gdb stdout output.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span>  --return-child-result
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span><span>                     GDB <span style=color:#8be9fd;font-style:italic>exit</span> code will be the child<span style=color:#f1fa8c>&#39;s exit code.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span><span><span style=color:#f1fa8c>  --configuration    Print details about GDB configuration and then exit.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span><span><span style=color:#f1fa8c>  --help             Print this message and then exit.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span><span><span style=color:#f1fa8c>  --version          Print version information and then exit.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span><span><span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span><span><span style=color:#f1fa8c>Remote debugging options:
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57</span><span><span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58</span><span><span style=color:#f1fa8c>  -b BAUDRATE        Set serial port baud rate used for remote debugging.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59</span><span><span style=color:#f1fa8c>  -l TIMEOUT         Set timeout in seconds for remote debugging.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60</span><span><span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">61</span><span><span style=color:#f1fa8c>Other options:
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">62</span><span><span style=color:#f1fa8c>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">63</span><span><span style=color:#f1fa8c>  --cd=DIR           Change current directory to DIR.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">64</span><span><span style=color:#f1fa8c>  --data-directory=DIR, -D
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">65</span><span><span style=color:#f1fa8c>                     Set GDB&#39;</span>s data-directory to DIR.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">66</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">67</span><span>At startup, GDB reads the following init files and executes their commands:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">68</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">69</span><span>For more information, <span style=color:#8be9fd;font-style:italic>type</span> <span style=color:#f1fa8c>&#34;help&#34;</span> from within GDB, or consult the
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">70</span><span>GDB manual <span style=color:#ff79c6>(</span>available as on-line info or a printed manual<span style=color:#ff79c6>)</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">71</span><span>Report bugs to <span style=color:#f1fa8c>&#34;&lt;http://www.gnu.org/software/gdb/bugs/&gt;&#34;</span>.
</span></span></code></pre></div><blockquote><p>启动gdb后，就你被带入gdb的调试环境中，就可以使用gdb的命令开始调试程序了，gdb的命令可以使用help命令来查看，如下所示：</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#ff79c6>(</span>gdb<span style=color:#ff79c6>)</span> <span style=color:#8be9fd;font-style:italic>help</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>List of classes of commands:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>aliases -- Aliases of other commands
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>breakpoints -- Making program stop at certain points
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>data -- Examining data
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>files -- Specifying and examining files
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>internals -- Maintenance commands
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>obscure -- Obscure features
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>running -- Running the program
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>stack -- Examining the stack
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>status -- Status inquiries
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>support -- Support facilities
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>tracepoints -- Tracing of program execution without stopping the program
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>user-defined -- User-defined commands
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>Type <span style=color:#f1fa8c>&#34;help&#34;</span> followed by a class name <span style=color:#ff79c6>for</span> a list of commands in that class.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>Type <span style=color:#f1fa8c>&#34;help all&#34;</span> <span style=color:#ff79c6>for</span> the list of all commands.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>Type <span style=color:#f1fa8c>&#34;help&#34;</span> followed by <span style=color:#8be9fd;font-style:italic>command</span> name <span style=color:#ff79c6>for</span> full documentation.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>Type <span style=color:#f1fa8c>&#34;apropos word&#34;</span> to search <span style=color:#ff79c6>for</span> commands related to <span style=color:#f1fa8c>&#34;word&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>Command name abbreviations are allowed <span style=color:#ff79c6>if</span> unambiguous.
</span></span></code></pre></div><blockquote><p>gdb的命令很多，gdb把之分成许多个种类。help命令只是例出gdb的命令种类，如果要看种类中的命令，可以使用help 命令，如：help breakpoints，查看设置断点的所有命令。也可以直接help 来查看命令的帮助。</p><p>gdb中，输入命令时，可以不用打全命令，只用打命令的前几个字符就可以了，当然，命令的前几个字符应该要标志着一个唯一的命令，在Linux下，你可以敲击两次TAB键来补齐命令的全称，如果有重复的，那么gdb会把其例出来。</p></blockquote><h3 id=启动程序调试>启动程序调试
<a class=heading-link href=#%e5%90%af%e5%8a%a8%e7%a8%8b%e5%ba%8f%e8%b0%83%e8%af%95><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p><strong>（1）一般程序调试</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># gdb -q myprogram	</span><span style=color:#6272a4>// -q 不打印GDB的版本信息
</span></span></span></code></pre></div><blockquote><p>直接运行gdb调试程序。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb)file myprogram
</span></span></code></pre></div><blockquote><p>运行gdb之后再加载待调试程序。</p></blockquote><h4 id=file>file
<a class=heading-link href=#file><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>装载指定的可执行文件进行调试，读取程序的symbols信息。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) file calwin.out 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Reading symbols from calwin.out...
</span></span></code></pre></div><p><strong>（2）调试正在运行的进程</strong></p><blockquote><p>GDB可以对正在执行的程序进行调度，它允许开发人员中断程序并查看其状态，之后还能让这个程序正常地继续执行。GDB提供了两种方式来调试正在运行的进程：一种是在GDB命令行上指定进程的PID，另一种是在GDB中使用“attach”命令。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># gdb -p PID	</span><span style=color:#6272a4>// myprogram PID
</span></span></span></code></pre></div><blockquote><p>指定PID的进程程序调试</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb)attach PID	<span style=color:#6272a4>// myprogram PID
</span></span></span></code></pre></div><blockquote><p>运行gdb之后再绑定OID的进程程序调试</p></blockquote><h4 id=attach>attach
<a class=heading-link href=#attach><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>执行attach pid即可调试正在运行的进程号为PID的程序。</p></blockquote><h4 id=detach>detach
<a class=heading-link href=#detach><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>在完成调试之后，执行detach命令断开连接，让被调试的进程可以继续正常运行。</p></blockquote><h3 id=一般调试指令>一般调试指令
<a class=heading-link href=#%e4%b8%80%e8%88%ac%e8%b0%83%e8%af%95%e6%8c%87%e4%bb%a4><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=shell>shell
<a class=heading-link href=#shell><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) shell <span style=color:#ff79c6>&lt;</span>command string<span style=color:#ff79c6>&gt;</span> 
</span></span></code></pre></div><blockquote><p>在gdb环境中，可以执行Linux的shell命令。调用Linux的shell来执行，默认使用标准shell（/bin/sh）。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) shell ps
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  PID TTY          TIME CMD
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>  <span style=color:#bd93f9>211</span> ttyLP0   <span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span> autologin
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>  <span style=color:#bd93f9>220</span> ttyLP0   <span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span> login
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>  <span style=color:#bd93f9>222</span> ttyLP0   <span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span> sh
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>  <span style=color:#bd93f9>283</span> ttyLP0   <span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span> gdb
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>  <span style=color:#bd93f9>289</span> ttyLP0   <span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>00</span> ps
</span></span></code></pre></div><h4 id=list>list
<a class=heading-link href=#list><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>查看源码，不加参数时，向下显示源码，加参数-l时，向上显示源码，默认显示10行。命令缩写是l</p><p>目前list指令只能显示代码的行号，不显示具体代码，不知道为啥？？</p></blockquote><h4 id=edit>edit
<a class=heading-link href=#edit><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>编辑当前所在的行，也可以编辑某个函数的源码(规则同list)。命令缩写是e</p></blockquote><h4 id=disassemble>disassemble
<a class=heading-link href=#disassemble><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>1、不带参数：默认的反汇编范围是所选择地址附近的汇编代码；
2、单个参数：当然也可以是函数名，因为函数名也是一个 地址；
3、两个参数：就是内存地址范围；</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) disassemble captureAll
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Dump of assembler code <span style=color:#ff79c6>for</span> function ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b00</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>0</span><span style=color:#ff79c6>&gt;:</span>	stp	x29, x30, [sp, #<span style=color:#ff79c6>-</span><span style=color:#bd93f9>32</span>]<span style=color:#ff79c6>!</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#ff79c6>&lt;</span>ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>88</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b3c</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>60</span><span style=color:#ff79c6>&gt;:</span>	ldr	x0, [x19]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b40</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>64</span><span style=color:#ff79c6>&gt;:</span>	cbz	x0, <span style=color:#bd93f9>0xaaaaaaab2b58</span> <span style=color:#ff79c6>&lt;</span>ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>88</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ff79c6>=&gt;</span> <span style=color:#bd93f9>0x0000aaaaaaab2b44</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>68</span><span style=color:#ff79c6>&gt;:</span>	bl	<span style=color:#bd93f9>0xaaaaaaab6190</span> <span style=color:#ff79c6>&lt;</span>V4L2Camera<span style=color:#ff79c6>::</span>grabFrame()<span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b48</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>72</span><span style=color:#ff79c6>&gt;:</span>	cbz	w0, <span style=color:#bd93f9>0xaaaaaaab2bf4</span> <span style=color:#ff79c6>&lt;</span>ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>244</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b4c</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>76</span><span style=color:#ff79c6>&gt;:</span>	cmn	w0, #<span style=color:#bd93f9>0x1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2b50</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>80</span><span style=color:#ff79c6>&gt;:</span>	b.eq	<span style=color:#bd93f9>0xaaaaaaab2d3c</span> <span style=color:#ff79c6>&lt;</span>ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>572</span><span style=color:#ff79c6>&gt;</span>  <span style=color:#6272a4>// b.none
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#6272a4></span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>   <span style=color:#bd93f9>0x0000aaaaaaab2d8c</span> <span style=color:#ff79c6>&lt;+</span><span style=color:#bd93f9>652</span><span style=color:#ff79c6>&gt;:</span>	b	<span style=color:#bd93f9>0xaaaaaaab2b58</span> <span style=color:#ff79c6>&lt;</span>ImageProvider<span style=color:#ff79c6>::</span>captureAll()<span style=color:#ff79c6>+</span><span style=color:#bd93f9>88</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>End of assembler dump.
</span></span></code></pre></div><h2 id=程序运行控制>程序运行控制
<a class=heading-link href=#%e7%a8%8b%e5%ba%8f%e8%bf%90%e8%a1%8c%e6%8e%a7%e5%88%b6><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h4 id=run>run
<a class=heading-link href=#run><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>重新开始运行文件（run-text：加载文本文件，run-bin：加载二进制文件），命令缩写为r</p><p>run argv[1] argv[2] 调试时命令行传参。</p><p>run > outfile 使用重定向控制程序输出。</p></blockquote><h4 id=start>start
<a class=heading-link href=#start><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>单步执行，运行程序，停在第一执行语句。</p></blockquote><h4 id=continue>continue
<a class=heading-link href=#continue><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>继续执行，直接运行结束，或者到下一个断点处。命令缩写为c</p></blockquote><h4 id=nextstep>next/step
<a class=heading-link href=#nextstep><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>next [N]: 单步调试（跳过函数调用），命令缩写为n</p><p>step [N]: 单步调试（进入函数调用），命令缩写为s</p></blockquote><h4 id=nextistepi>nexti/stepi
<a class=heading-link href=#nextistepi><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>汇编代码逐行运行，执行下一行源代码中的一条汇编指令。同next、step</p><p>nexti [N]:单步调试（跳过函数调用），命令缩写为ni</p><p>stepi [N]:单步调试（进入函数调用），命令缩写为si</p></blockquote><h4 id=call>call
<a class=heading-link href=#call><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>call <span style=color:#ff79c6>&lt;</span>expr<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>表达式中可以一是函数，以此达到强制调用函数的目的。并显示函数的返回值，如果函数返回值是void，那么就不显示。</p><p>call function()，可以调用某个函数直接执行，调用函数时需要添加()</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) call reopenCameras()
</span></span></code></pre></div><blockquote><p>print function()，也可以实现上面的功能。print和call的不同是，如果函数返回void，call则不显示，print则显示函数返回值，并把该值存入历史数据中。</p><p>调用abort函数时产生此信号。进程异常终止。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) call abort
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>$<span style=color:#bd93f9>3</span> <span style=color:#ff79c6>=</span> {<span style=color:#8be9fd>void</span> (<span style=color:#8be9fd>void</span>)} <span style=color:#bd93f9>0xfffff673ce58</span> <span style=color:#ff79c6>&lt;</span>__GI_abort<span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>(gdb) call abort()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#ff79c6>======</span> App <span style=color:#ff79c6>======</span> readMax9286_event <span style=color:#ff79c6>=&gt;</span> retval <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span> [ <span style=color:#bd93f9>8052.400313</span>] 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>[ <span style=color:#bd93f9>8052.400313</span>] <span style=color:#6272a4>/******************* max9286_dev_read return 0x00 *********************/</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>[ <span style=color:#bd93f9>8052.400313</span>] 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ff79c6>======</span> App <span style=color:#ff79c6>======</span> readMax9286_event<span style=color:#ff79c6>!!!</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>Thread <span style=color:#bd93f9>1</span> <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> received signal SIGABRT, Aborted.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>__GI_raise (sig<span style=color:#ff79c6>=</span>sig@entry<span style=color:#ff79c6>=</span><span style=color:#bd93f9>6</span>) at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>raise.<span style=color:#8be9fd;font-style:italic>c</span>:<span style=color:#bd93f9>50</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bd93f9>50</span>	..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>raise.<span style=color:#8be9fd;font-style:italic>c</span>: No such file or directory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>The program being debugged was signaled <span style=color:#ff79c6>while</span> in a function called from GDB.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>GDB remains in the frame where the signal was received.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>To change this behavior use <span style=color:#f1fa8c>&#34;set unwindonsignal on&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>Evaluation of the expression containing the function
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>(__GI_abort) will be abandoned.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>When the function is done executing, GDB will silently stop.
</span></span></code></pre></div><blockquote><p>继续执行，可以看到程序“sig=6 ”</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) c
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Continuing.[ <span style=color:#bd93f9>8167.171029</span>] <span style=color:#8be9fd;font-style:italic>audit</span>: type<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1701</span> audit(<span style=color:#bd93f9>1590545030.676</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>2</span>)<span style=color:#ff79c6>:</span> auid<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4294967295</span> uid<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0</span> gid<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0</span> ses<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4294967295</span> pid<span style=color:#ff79c6>=</span><span style=color:#bd93f9>280</span> comm<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;calwin.out&#34;</span> exe<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/home/root/gdb_test/calwin.out&#34;</span> sig<span style=color:#ff79c6>=</span><span style=color:#bd93f9>6</span> res<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>Unable to fetch general registers.<span style=color:#ff79c6>:</span> No such process.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>Unable to fetch general registers.<span style=color:#ff79c6>:</span> No such process.[ <span style=color:#bd93f9>8167.207995</span>] <span style=color:#8be9fd;font-style:italic>max9286_set_power</span>:<span style=color:#bd93f9>1870</span><span style=color:#ff79c6>:</span> close video device <span style=color:#ff79c6>--</span> <span style=color:#bd93f9>4</span> <span style=color:#ff79c6>--</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>(gdb) [Thread <span style=color:#bd93f9>0xffffda05b190</span> (LWP <span style=color:#bd93f9>290</span>) exited]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>[Thread <span style=color:#bd93f9>0xffffeb732190</span> (LWP <span style=color:#bd93f9>288</span>) exited]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>[Thread <span style=color:#bd93f9>0xffffebfcc190</span> (LWP <span style=color:#bd93f9>287</span>) exited]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>[T[ <span style=color:#bd93f9>8167.241648</span>] ###### max9286_dev_close 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>hread <span style=color:#bd93f9>0xffffec7cd190</span> (LWP <span style=color:#bd93f9>286</span>) exited]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>[Thread <span style=color:#bd93f9>0xfffff4f21530</span> (LWP <span style=color:#bd93f9>280</span>) exited]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>Cannot execute this command without a live selected <span style=color:#ff79c6>thread</span>.
</span></span></code></pre></div><h4 id=until>until
<a class=heading-link href=#until><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。命令缩写为u</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>until location
</span></span></code></pre></div><blockquote><p>until 命令还可以后跟某行代码的行号，以指示 GDB 调试器直接执行至指定位置后停止。</p></blockquote><h4 id=finish>finish
<a class=heading-link href=#finish><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>继续执行并结束当前函数，返回到函数调用点。</p></blockquote><h4 id=return>return
<a class=heading-link href=#return><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>return &lt;expression&gt;
</span></span></code></pre></div><blockquote><p>使用return命令取消当前函数的执行，并立即返回，如果指定了<code>&lt;expression></code>，那么该表达式的值会被认作函数的返回值。</p></blockquote><h4 id=kill>kill
<a class=heading-link href=#kill><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>终止当前调试的程序。</p></blockquote><h4 id=quit>quit
<a class=heading-link href=#quit><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) q
</span></span></code></pre></div><blockquote><p>退出gdb，命令缩写为q。<code>Ctrl+D</code>也可以退出gdb调试。</p></blockquote><h2 id=设置查看变量值>设置查看变量值
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e6%9f%a5%e7%9c%8b%e5%8f%98%e9%87%8f%e5%80%bc><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h4 id=whatis>whatis
<a class=heading-link href=#whatis><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>显示变量类型。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) whatis m_needReopen 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>type <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>bool</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>(gdb) whatis m_frontCam 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>type <span style=color:#ff79c6>=</span> V4L2Camera <span style=color:#ff79c6>*</span>
</span></span></code></pre></div><h4 id=ptype>ptype
<a class=heading-link href=#ptype><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ptype[<span style=color:#ff79c6>/</span>FLAGS] TYPE <span style=color:#ff79c6>|</span> EXPRESSION
</span></span></code></pre></div><blockquote><p>显示变量类型，比whatis功能更强，可以提供一个结构的定义。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) ptype m_needReopen 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>type <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>bool</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>(gdb) ptype m_frontCam
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>type <span style=color:#ff79c6>=</span> class V4L2Camera {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#8be9fd;font-style:italic>private</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    video_channel <span style=color:#ff79c6>*</span>m_video_ch;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    g2d_surface <span style=color:#ff79c6>*</span>m_src;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    g2d_surface <span style=color:#ff79c6>*</span>m_dst;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#8be9fd>void</span> <span style=color:#ff79c6>*</span>m_g2dHandle;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    <span style=color:#8be9fd>bool</span> m_buffer_NULL_status;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  <span style=color:#8be9fd;font-style:italic>public</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    <span style=color:#8be9fd>bool</span> m_running;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    V4L2Camera(<span style=color:#ff79c6>const</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>, <span style=color:#8be9fd>void</span> <span style=color:#ff79c6>*</span>, <span style=color:#8be9fd>int</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    <span style=color:#ff79c6>~</span>V4L2Camera();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#8be9fd>bool</span> <span style=color:#50fa7b>checkCameraState</span>(<span style=color:#8be9fd>int</span> <span style=color:#ff79c6>&amp;</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    <span style=color:#8be9fd>bool</span> <span style=color:#50fa7b>init</span>(g2d_buf <span style=color:#ff79c6>*</span>, <span style=color:#8be9fd>int</span>, <span style=color:#8be9fd>int</span>, <span style=color:#8be9fd>int</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>    <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>startCapture</span>(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>    <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>grabFrame</span>(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>    <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>returnFrame</span>(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>    <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>stopCapture</span>(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>    <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>copyToRgba</span>(<span style=color:#8be9fd>int</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>    <span style=color:#8be9fd>void</span> <span style=color:#50fa7b>cacheLastFrame</span>(<span style=color:#8be9fd>int</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>    <span style=color:#8be9fd>bool</span> <span style=color:#50fa7b>isGreenFrame</span>(<span style=color:#8be9fd>unsigned</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>, <span style=color:#8be9fd>int</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>    v_buffer <span style=color:#ff79c6>*</span> <span style=color:#50fa7b>getVideoBuffer</span>(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>  <span style=color:#8be9fd;font-style:italic>private</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>    <span style=color:#8be9fd>bool</span> isOpen(<span style=color:#8be9fd>void</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>} <span style=color:#ff79c6>*</span>
</span></span></code></pre></div><h4 id=info>info
<a class=heading-link href=#info><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>查看程序运行的状态，例如info args显示传递给函数的参数，info registers显示当前使用的寄存器，info breakpoints显示断点信息，可以用help info查看其支持的子命令。命令缩写为i</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>info locals			<span style=color:#6272a4>// 显示当前堆栈框架的局部变量列表及其值。
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#6272a4></span>info args			<span style=color:#6272a4>// 显示当前函数的参数名及其值。
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#6272a4></span>info registers		<span style=color:#6272a4>//显示处理器的寄存器信息。
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#6272a4></span>info all<span style=color:#ff79c6>-</span>registers	<span style=color:#6272a4>// 显示所有寄存器的情况。（包括浮点寄存器）
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#6272a4></span>info signals
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>info handle			<span style=color:#6272a4>// 显示有哪些信号在被GDB检测中。
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#6272a4></span>info program 		<span style=color:#6272a4>//显示程序的是否在运行，进程号，被暂停的原因。
</span></span></span></code></pre></div><h4 id=set>set
<a class=heading-link href=#set><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>设置变量的值，命令缩写为s</p></blockquote><h4 id=show>show
<a class=heading-link href=#show><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>set命令设置完之后，用show查看，可以单独查看某个变量的设置情况。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print address <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>打开/关闭地址输出，当程序显示函数信息时，GDB会显出函数的参数地址。系统默认为打开的。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>show print address 
</span></span></code></pre></div><blockquote><p>查看当前地址显示选项是否打开。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print array off 
</span></span></code></pre></div><blockquote><p>打开数组显示，打开后当数组显示时，每个元素占一行，如果不打开的话，每个元素则以逗号分隔。这个选项默认是关闭的。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print elements <span style=color:#ff79c6>&lt;</span>number<span style=color:#ff79c6>-</span>of<span style=color:#ff79c6>-</span>elements<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>这个选项主要是设置数组的，如果你的数组太大了，那么就可以指定一个<code>&lt;number-of-elements></code>来指定数据显示的最大长度，当到达这个长度时，GDB就不再往下显示了。如果设置为0，则表示不限制。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print null<span style=color:#ff79c6>-</span>stop <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>如果打开了这个选项，那么当显示字符串时，遇到结束符则停止显示。这个选项默认为off。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set step<span style=color:#ff79c6>-</span>mode on 
</span></span></code></pre></div><blockquote><p>打开step-mode模式。在进行单步跟踪时，程序不会因为没有debug信息而不停住。这个参数有很利于查看机器码。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print sevenbit<span style=color:#ff79c6>-</span>strings <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>设置字符显示，是否按“/nnn”的格式显示。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print pretty <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>如果打开printf pretty这个选项，那么当GDB显示结构体时会比较漂亮。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print <span style=color:#ff79c6>union</span> <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>设置显示结构体时，是否显式其内的联合体数据。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print object <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>在C++中，如果一个对象指针指向其派生类，如果打开这个选项，GDB会自动按照虚方法调用的规则显示输出，如果关闭这个选项的话，GDB就不管虚函数表了。这个选项默认是off。</p></blockquote><h4 id=print>print
<a class=heading-link href=#print><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>print <span style=color:#ff79c6>&lt;</span>expression<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>打印变量或表达式，命令缩写为p</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>x 按十六进制格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>d 按十进制格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>u 按十六进制格式显示无符号整型。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>o 按八进制格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>t 按二进制格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>a 按十六进制格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>c 按字符格式显示变量。 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>f 按浮点数格式显示变量。 
</span></span></code></pre></div><blockquote><p>print与set都可以设置变量的值。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set var m_needReopen<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span>	
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>set m_needReopen<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span> 		<span style=color:#6272a4>// 也是可以的
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#6272a4></span>print m_needReopen<span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span>
</span></span></code></pre></div><blockquote><p>在某些时候，很有可能你的变量和GDB中的参数冲突。使用set var格式的GDB命令，告知变量不是GDB的参数，而是程序的变量名，这样严谨一些。</p><p>打印数组或者指针变量：静态数组，直接打印，动态数组是，base@length。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) p sBlackScreenBuffer
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>$<span style=color:#bd93f9>2</span> <span style=color:#ff79c6>=</span> (<span style=color:#8be9fd>unsigned</span> <span style=color:#8be9fd>char</span> <span style=color:#ff79c6>*</span>) <span style=color:#bd93f9>0xffff92471010</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>\200</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>(gdb) p <span style=color:#ff79c6>*</span>sBlackScreenBuffer@<span style=color:#bd93f9>10</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>$<span style=color:#bd93f9>3</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>\200\000\200\000\200\000\200\000\200</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>(gdb) p<span style=color:#ff79c6>/</span>x <span style=color:#ff79c6>*</span>sBlackScreenBuffer@<span style=color:#bd93f9>10</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>$<span style=color:#bd93f9>4</span> <span style=color:#ff79c6>=</span> {<span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>(gdb) p<span style=color:#ff79c6>/</span>x <span style=color:#ff79c6>*</span>sBlackScreenBuffer@<span style=color:#bd93f9>15</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>$<span style=color:#bd93f9>5</span> <span style=color:#ff79c6>=</span> {<span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>, <span style=color:#bd93f9>0x0</span>, <span style=color:#bd93f9>0x80</span>}
</span></span></code></pre></div><blockquote><p>print实现gdb内嵌操作</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>p <span style=color:#ff79c6>sizeof</span>(<span style=color:#8be9fd>int</span>)				<span style=color:#6272a4>// 查看 int 类型所占字节数。
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#6272a4></span>p <span style=color:#ff79c6>sizeof</span>(name)				<span style=color:#6272a4>// 查看结构体变量name所占字节数
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#6272a4></span>p strlen(name)				<span style=color:#6272a4>// 查看字符串name长度
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#6272a4></span>p strcmp(name1, name2)		<span style=color:#6272a4>// 比较name1和name2为字符串的大小
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#6272a4></span>p strcpy(p.name, <span style=color:#f1fa8c>&#34;Soft&#34;</span>)	<span style=color:#6272a4>// 字符串拷贝, name是结构体p的数据成员。
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) p sizeof(m_needReopen)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>$1 = 1
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>(gdb) p m_front_g2d_buffer 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>$4 = (g2d_buf *) 0x0
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>(gdb) p sizeof(m_front_g2d_buffer)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>$5 = 8
</span></span></code></pre></div><h4 id=x>x
<a class=heading-link href=#x><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>查看内存</p><p>如：x/20xw 显示20个单元，16进制，4字节每单元。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) help x
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Examine <span style=color:#8be9fd;font-style:italic>memory</span>: x<span style=color:#ff79c6>/</span>FMT ADDRESS.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>ADDRESS is an expression <span style=color:#ff79c6>for</span> the memory address to examine.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>FMT is a repeat count followed by a format letter and a size letter.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>Format letters are o(octal), x(hex), d(decimal), u(<span style=color:#8be9fd>unsigned</span> decimal),
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  t(binary), f(<span style=color:#8be9fd>float</span>), a(address), i(instruction), c(<span style=color:#8be9fd>char</span>), s(string)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  and z(hex, zero padded on the left).
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>Size letters are b(byte), h(halfword), w(word), g(giant, <span style=color:#bd93f9>8</span> bytes).
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>The specified number of objects of the specified size are printed
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>according to the format.  If a negative number is specified, memory is
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>examined backward from the address.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>Defaults <span style=color:#ff79c6>for</span> format and size letters are those previously used.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>Default count is <span style=color:#bd93f9>1.</span>  Default address is following last thing printed
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>with this command or <span style=color:#f1fa8c>&#34;print&#34;</span>.
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) p m_frontCam
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>$<span style=color:#bd93f9>1</span> <span style=color:#ff79c6>=</span> (V4L2Camera <span style=color:#ff79c6>*</span>) <span style=color:#bd93f9>0xffffd40029d0</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) x m_frontCam
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#bd93f9>0xffffd40029d0</span><span style=color:#ff79c6>:</span>	<span style=color:#ff79c6>-</span><span style=color:#bd93f9>16</span> <span style=color:#f1fa8c>&#39;\360&#39;</span>
</span></span></code></pre></div><h4 id=display>display
<a class=heading-link href=#display><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>使用 display 命令查看变量或表达式的值，每当程序暂停执行（例如单步执行）时，GDB 调试器都会自动帮我们打印出来，而 print 命令则不会。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span> display <span style=color:#ff79c6>&lt;</span>expr<span style=color:#ff79c6>&gt;</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    display<span style=color:#ff79c6>/&lt;</span>fmt<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>&lt;</span>expr<span style=color:#ff79c6>&gt;</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    display<span style=color:#ff79c6>/&lt;</span>fmt<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>&lt;</span>addr<span style=color:#ff79c6>&gt;</span> 
</span></span></code></pre></div><blockquote><p>expr是一个表达式，fmt表示显示的格式，addr表示内存地址，当你用display设定好了一个或多个表达式后，只要你的程序被停下来，GDB会自动显示你所设置的这些表达式的值。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>info display
</span></span></code></pre></div><blockquote><p>显示添加的display信息。</p></blockquote><h4 id=undisplay>undisplay
<a class=heading-link href=#undisplay><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span> undisplay <span style=color:#ff79c6>&lt;</span>dnums...<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>取消display编号对应的监控。</p></blockquote><h2 id=查看堆栈信息>查看堆栈信息
<a class=heading-link href=#%e6%9f%a5%e7%9c%8b%e5%a0%86%e6%a0%88%e4%bf%a1%e6%81%af><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h4 id=backtrace>backtrace
<a class=heading-link href=#backtrace><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>查看函数的调用的栈帧和层级关系，命令缩写为bt</p><p>backtrace full: 查看更全的信息，命令缩写bt f</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) bt   
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6>#0  ImageProvider::captureAll (this=0xaaaadc88f890) at ../src/imageprovider.cpp:534
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ff79c6>#1  0x0000aaaac3e25f50 in VideoWidget::paintGL (this=0xaaaadc97c9e0) at ../src/videowidget.cpp:83
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ff79c6>#2  0x0000ffffac883550 in ?? () from /usr/lib/libQt5Widgets.so.5
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#ff79c6>#3  0x0000ffffac861fa8 in QWidget::event(QEvent*) () from /usr/lib/libQt5Widgets.so.5
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#ff79c6>#4  0x0000ffffac81ed3c in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/libQt5Widgets.so.5
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#ff79c6></span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#ff79c6>#22 0x0000ffffabbcb2f0 in QCoreApplication::exec() () from /usr/lib/libQt5Core.so.5
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#ff79c6>#23 0x0000aaaac3e23784 in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at ../src/main.cpp:40
</span></span></span></code></pre></div><h4 id=frame>frame
<a class=heading-link href=#frame><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>切换函数的栈帧，命令缩写为f</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) f <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6>#1  0x0000aaaac3e25f50 in VideoWidget::paintGL (this=0xaaaadc97c9e0) at ../src/videowidget.cpp:83
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ff79c6></span><span style=color:#bd93f9>83</span>	..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>videowidget.<span style=color:#8be9fd;font-style:italic>cpp</span>: No such file or directory.
</span></span></code></pre></div><h4 id=info-frame>info frame
<a class=heading-link href=#info-frame><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>显示当前堆叠帧的信息。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) info frame
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Stack level <span style=color:#bd93f9>1</span>, frame at <span style=color:#bd93f9>0xfffff3eda220</span><span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span> pc <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0xaaaac3e25f50</span> in VideoWidget<span style=color:#ff79c6>::</span>paintGL (..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>videowidget.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>83</span>); saved pc <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0xffffac883550</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span> called by frame at <span style=color:#bd93f9>0xfffff3eda270</span>, caller of frame at <span style=color:#bd93f9>0xfffff3eda1f0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span> source language c<span style=color:#ff79c6>++</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span> Arglist at <span style=color:#bd93f9>0xfffff3eda1f0</span>, <span style=color:#8be9fd;font-style:italic>args</span>: this<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xaaaadc97c9e0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span> Locals at <span style=color:#bd93f9>0xfffff3eda1f0</span>, Previous frame&#39;s sp is <span style=color:#bd93f9>0xfffff3eda220</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span> Saved <span style=color:#8be9fd;font-style:italic>registers</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  x19 at <span style=color:#bd93f9>0xfffff3eda200</span>, x20 at <span style=color:#bd93f9>0xfffff3eda208</span>, x21 at <span style=color:#bd93f9>0xfffff3eda210</span>, x29 at <span style=color:#bd93f9>0xfffff3eda1f0</span>, x30 at <span style=color:#bd93f9>0xfffff3eda1f8</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>(gdb) info frame
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>Stack level <span style=color:#bd93f9>1</span>, frame at <span style=color:#bd93f9>0xfffff3eda220</span><span style=color:#ff79c6>:</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span> pc <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0xaaaac3e25f50</span> in VideoWidget<span style=color:#ff79c6>::</span>paintGL (..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>videowidget.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>83</span>); saved pc <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0xffffac883550</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span> called by frame at <span style=color:#bd93f9>0xfffff3eda270</span>, caller of frame at <span style=color:#bd93f9>0xfffff3eda1f0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span> source language c<span style=color:#ff79c6>++</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span> Arglist at <span style=color:#bd93f9>0xfffff3eda1f0</span>, <span style=color:#8be9fd;font-style:italic>args</span>: this<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xaaaadc97c9e0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span> Locals at <span style=color:#bd93f9>0xfffff3eda1f0</span>, Previous frame&#39;s sp is <span style=color:#bd93f9>0xfffff3eda220</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span> Saved <span style=color:#8be9fd;font-style:italic>registers</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>  x19 at <span style=color:#bd93f9>0xfffff3eda200</span>, x20 at <span style=color:#bd93f9>0xfffff3eda208</span>, x21 at <span style=color:#bd93f9>0xfffff3eda210</span>, x29 at <span style=color:#bd93f9>0xfffff3eda1f0</span>, x30 at <span style=color:#bd93f9>0xfffff3eda1f8</span>
</span></span></code></pre></div><h2 id=设置断点>设置断点
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e6%96%ad%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><blockquote><p>普通断点：作用于程序中的某一行，当程序运行至此行时停止执行；</p><p>观察断点：作用于某一变量或表达式，当该变量（表达式）的值发生改变时，程序暂停；</p><p>捕捉断点：监控程序中某一事件的发生，例如程序发生某种异常时、某一动态库被加载时等等，一旦目标时间发生，则程序停止执行。</p></blockquote><h3 id=设置普通断点>设置普通断点
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e6%99%ae%e9%80%9a%e6%96%ad%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=break>break
<a class=heading-link href=#break><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span> <span style=color:#ff79c6>break</span> … <span style=color:#ff79c6>if</span> condition
</span></span></code></pre></div><blockquote><p>添加断点，condition表示条件，在条件成立时停住。命令缩写为b</p></blockquote><h4 id=thbreak>thbreak
<a class=heading-link href=#thbreak><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>添加临时断点（(只可使用一次），命令缩写为tb</p></blockquote><p>指定文件加断点：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>break</span> <span style=color:#8be9fd;font-style:italic>filename</span>:linenum
</span></span></code></pre></div><blockquote><p>在源文件filename的linenum行处停住。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) b ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>542</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Breakpoint <span style=color:#bd93f9>3</span> at <span style=color:#bd93f9>0xaaaaaaab2b18</span><span style=color:#ff79c6>:</span> file ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.cpp, line <span style=color:#bd93f9>542.</span>
</span></span></code></pre></div><p>当前所在文件加断点：</p><p>(gdb) b 555</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#8be9fd;font-style:italic>Note</span>: breakpoint <span style=color:#bd93f9>2</span> also set at pc <span style=color:#bd93f9>0xaaaaaaab2b48</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Breakpoint <span style=color:#bd93f9>4</span> at <span style=color:#bd93f9>0xaaaaaaab2b48</span><span style=color:#ff79c6>:</span> file ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.cpp, line <span style=color:#bd93f9>555.</span>
</span></span></code></pre></div><p>指定函数加断点：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>break</span> <span style=color:#8be9fd;font-style:italic>filename</span>:function
</span></span></code></pre></div><blockquote><p>在源文件filename的function函数的入口处停住。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) b captureAll
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Breakpoint <span style=color:#bd93f9>5</span> at <span style=color:#bd93f9>0xaaaaaaab2b00</span><span style=color:#ff79c6>:</span> file ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.cpp, line <span style=color:#bd93f9>534.</span>
</span></span></code></pre></div><p>指定C++函数加断点：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) b V4L2Camera<span style=color:#ff79c6>::</span>grabFrame
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>Breakpoint <span style=color:#bd93f9>9</span> at <span style=color:#bd93f9>0xaaaaaaab6190</span><span style=color:#ff79c6>:</span> file ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.cpp, line <span style=color:#bd93f9>170.</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) tb <span style=color:#bd93f9>565</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>Temporary breakpoint <span style=color:#bd93f9>6</span> at <span style=color:#bd93f9>0xaaaaaaab2b58</span><span style=color:#ff79c6>:</span> file ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.cpp, line <span style=color:#bd93f9>567.</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>info breakpoints
</span></span></code></pre></div><blockquote><p>显示添加的断点信息，命令缩写为i b</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) i b
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Num     Type           Disp Enb Address            What
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#bd93f9>1</span>       breakpoint     keep y   <span style=color:#ff79c6>&lt;</span>PENDING<span style=color:#ff79c6>&gt;</span>          <span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#bd93f9>2</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b18</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>542</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#bd93f9>3</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b48</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#bd93f9>4</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b00</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>534</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#bd93f9>5</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab6190</span> in V4L2Camera<span style=color:#ff79c6>::</span>grabFrame() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>170</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#bd93f9>6</span>       breakpoint     del  y   <span style=color:#bd93f9>0x0000aaaaaaab2b58</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>567</span>
</span></span></code></pre></div><h4 id=disableenable>disable/enable
<a class=heading-link href=#disableenable><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span> disable<span style=color:#ff79c6>/</span>enable breakpointNum
</span></span></code></pre></div><blockquote><p>屏蔽/使能断点</p></blockquote><p>(gdb) disable 6</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) i b
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Num     Type           Disp Enb Address            What
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bd93f9>1</span>       breakpoint     keep y   <span style=color:#ff79c6>&lt;</span>PENDING<span style=color:#ff79c6>&gt;</span>          <span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bd93f9>2</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b18</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>542</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bd93f9>3</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b48</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bd93f9>4</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b00</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>534</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bd93f9>5</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab6190</span> in V4L2Camera<span style=color:#ff79c6>::</span>grabFrame() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>170</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bd93f9>6</span>       breakpoint     del  n   <span style=color:#bd93f9>0x0000aaaaaaab2b58</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>567</span>
</span></span></code></pre></div><h4 id=clear>clear
<a class=heading-link href=#clear><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>clear location
</span></span></code></pre></div><blockquote><p>删除指定位置处的所有断点。参数 location 通常为某一行代码的行号或者某个具体的函数名。当 location 参数为某个函数的函数名时，表示删除位于该函数入口处的所有断点。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>clear <span style=color:#ff79c6>&lt;</span>function<span style=color:#ff79c6>&gt;</span> 
</span></span></code></pre></div><blockquote><p>清除所有设置在函数上的断点。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>clear <span style=color:#ff79c6>&lt;</span>linenum<span style=color:#ff79c6>&gt;</span> 
</span></span></code></pre></div><blockquote><p>清除所有设置在指定行上的断点。</p></blockquote><h4 id=delete>delete
<a class=heading-link href=#delete><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>delete [breakpoints] [num]
</span></span></code></pre></div><blockquote><p>通常用来删除所有断点，也可以删除指定编号的各类型断点。其中，breakpoints 参数可有可无，num 参数为指定断点的编号，其可以是 delete 删除某一个断点，而非全部。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) delete <span style=color:#bd93f9>6</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>(gdb) i b
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>Num     Type           Disp Enb Address            What
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bd93f9>1</span>       breakpoint     keep y   <span style=color:#ff79c6>&lt;</span>PENDING<span style=color:#ff79c6>&gt;</span>          <span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bd93f9>2</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b18</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>542</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bd93f9>3</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b48</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bd93f9>4</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b00</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>534</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bd93f9>5</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab6190</span> in V4L2Camera<span style=color:#ff79c6>::</span>grabFrame() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>170</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span></code></pre></div><h4 id=ignore>ignore
<a class=heading-link href=#ignore><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ignore N count
</span></span></code></pre></div><blockquote><p>忽视断点多少次。ignore 命令可以使目标断点暂时失去作用，当断点失效的次数超过指定次数时，断点的功能会自动恢复。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) ignore <span style=color:#bd93f9>2</span> <span style=color:#bd93f9>5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Will ignore next <span style=color:#bd93f9>5</span> crossings of breakpoint <span style=color:#bd93f9>2.</span>
</span></span></code></pre></div><h3 id=设置观察断点>设置观察断点
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e8%a7%82%e5%af%9f%e6%96%ad%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>观察点（watchpoint）和断点(breakpoint)类似，但是断点是程序运行前设置，观察点是运行中设置，而且只能是变量或者表达式。</p></blockquote><h4 id=watch>watch
<a class=heading-link href=#watch><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>watch [<span style=color:#ff79c6>-</span>l<span style=color:#ff79c6>|-</span>location] expression
</span></span></code></pre></div><blockquote><p>expression指的是监控的变量或表达式。只有当被监控变量（表达式）的值发生改变，程序停止运行。</p></blockquote><h4 id=rwatch>rwatch
<a class=heading-link href=#rwatch><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>只要程序中出现读取目标变量（表达式）的值的操作，程序停止运行</p></blockquote><h4 id=awatch>awatch
<a class=heading-link href=#awatch><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>只要程序中出现读取目标变量（表达式）的值或者改变值的操作，程序停止运行</p></blockquote><p><strong>注意：</strong></p><blockquote><p>当监控的为局部变量（表达式）时，一旦局部变量（表达式）失效，则监控操作也随即失效；</p><p>如果监控的是一个指针变量（例如 *p），则 watch *p 和 watch p 是有区别的，前者监控的是 p 所指数据的变化情况，而后者监控的是 p 指针本身有没有改变指向；</p><p>这 3 个监控命令还可以用于监控数组中元素值的变化情况，例如对于 a[10] 这个数组，watch a 表示只要 a 数组中存储的数据发生改变，程序就会停止执行。</p></blockquote><p>​</p><p>局部变量超出作用域，断点失效并被删除。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) c
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Continuing.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>Error evaluating expression for watchpoint 4
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>current stack frame does not contain a variable named `this&#39;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>Watchpoint 4 deleted.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>[Switching to Thread 0xffffe94c1190 (LWP 245)]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>ioctl () at ../sysdeps/unix/sysv/linux/aarch64/ioctl.S:27
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>27	../sysdeps/unix/sysv/linux/aarch64/ioctl.S: No such file or directory.
</span></span></code></pre></div><p>awatch 和 rwatch 命令只能设置硬件观察点，如果系统不支持或者借助如上命令禁用，则 GDB 调试器会打印如下信息：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) rwatch m_needReopen
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>Expression cannot be implemented with read<span style=color:#ff79c6>/</span>access watchpoint.
</span></span></code></pre></div><h4 id=disableenable-1>disable/enable
<a class=heading-link href=#disableenable-1><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>disable<span style=color:#ff79c6>/</span>enable watchpointsNum
</span></span></code></pre></div><blockquote><p>屏蔽/使能观察点。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) watch ImageProvider<span style=color:#ff79c6>::</span>m_ip 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Hardware watchpoint <span style=color:#bd93f9>14</span><span style=color:#ff79c6>:</span> ImageProvider<span style=color:#ff79c6>::</span>m_ip
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>(gdb) watch m_needReopen 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>Watchpoint <span style=color:#bd93f9>15</span><span style=color:#ff79c6>:</span> m_needReopen
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>(gdb) i b
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>Num     Type           Disp Enb Address            What
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bd93f9>2</span>       breakpoint     keep y   <span style=color:#bd93f9>0x0000aaaaaaab2b18</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>542</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>	breakpoint already hit <span style=color:#bd93f9>16</span> times
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bd93f9>3</span>       breakpoint     keep n   <span style=color:#bd93f9>0x0000aaaaaaab2b48</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>555</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>	breakpoint already hit <span style=color:#bd93f9>3</span> times
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bd93f9>4</span>       breakpoint     keep n   <span style=color:#bd93f9>0x0000aaaaaaab2b00</span> in ImageProvider<span style=color:#ff79c6>::</span>captureAll() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>534</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>	breakpoint already hit <span style=color:#bd93f9>3</span> times
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#bd93f9>5</span>       breakpoint     keep n   <span style=color:#bd93f9>0x0000aaaaaaab6190</span> in V4L2Camera<span style=color:#ff79c6>::</span>grabFrame() at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>170</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>	breakpoint already hit <span style=color:#bd93f9>1</span> time
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#bd93f9>14</span>      hw watchpoint  keep y                      ImageProvider<span style=color:#ff79c6>::</span>m_ip
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bd93f9>15</span>      watchpoint     keep y                      m_needReopen
</span></span></code></pre></div><h3 id=设置捕捉断点>设置捕捉断点
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e6%8d%95%e6%8d%89%e6%96%ad%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>用捕捉断点监控某一事件的发生，等同于在程序中该事件发生的位置打普通断点。</p></blockquote><h4 id=catch>catch
<a class=heading-link href=#catch><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>可设置捕捉点来补捉程序运行时的一些事件。当event发生时，程序就会暂停执行。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>catch <span style=color:#ff79c6>&lt;</span>event<span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>Set catchpoints to catch events.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>List of catch <span style=color:#8be9fd;font-style:italic>subcommands</span>:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>catch assert <span style=color:#ff79c6>--</span> Catch failed Ada assertions
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>catch catch <span style=color:#ff79c6>--</span> Catch an exception			一个C<span style=color:#ff79c6>++</span>捕捉到的异常
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>catch throw <span style=color:#ff79c6>--</span> Catch an exception			一个C<span style=color:#ff79c6>++</span>抛出的异常
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>catch rethrow <span style=color:#ff79c6>--</span> Catch an exception
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>catch exception <span style=color:#ff79c6>--</span> Catch Ada exceptions
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>catch handlers <span style=color:#ff79c6>--</span> Catch Ada exceptions
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>catch exec <span style=color:#ff79c6>--</span> Catch calls to exec
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>catch fork <span style=color:#ff79c6>--</span> Catch calls to fork			调用系统调用fork时
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>catch vfork <span style=color:#ff79c6>--</span> Catch calls to vfork
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>catch load <span style=color:#ff79c6>--</span> Catch loads of shared libraries		载入共享库（动态链接库）时
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>catch unload <span style=color:#ff79c6>--</span> Catch unloads of shared libraries	卸载共享库（动态链接库）时
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>catch signal <span style=color:#ff79c6>--</span> Catch signals by their names and<span style=color:#ff79c6>/</span>or numbers
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>catch syscall <span style=color:#ff79c6>--</span> Catch system calls by their names
</span></span></code></pre></div><blockquote><p>如监控共享库libmax9286-camera.so.1的加载：</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# gdb <span style=color:#ff79c6>-</span>q calwin.out   
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Reading symbols from calwin.out...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>(gdb) catch load libmax9286<span style=color:#ff79c6>-</span>camera.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>Catchpoint <span style=color:#bd93f9>1</span> (load)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>(gdb) r
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>Starting <span style=color:#8be9fd;font-style:italic>program</span>: <span style=color:#ff79c6>/</span>home<span style=color:#ff79c6>/</span>root<span style=color:#ff79c6>/</span>gdb_test<span style=color:#ff79c6>/</span>calwin.out 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>[Thread debugging using libthread_db enabled]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>Using host libthread_db library <span style=color:#f1fa8c>&#34;/lib/libthread_db.so.1&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>Catchpoint <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  Inferior loaded <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libg2d.so<span style=color:#bd93f9>.1.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libmax9286<span style=color:#ff79c6>-</span>camera.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libQt5Widgets.so<span style=color:#bd93f9>.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libQt5Gui.so<span style=color:#bd93f9>.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libQt5SerialPort.so<span style=color:#bd93f9>.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libQt5Test.so<span style=color:#bd93f9>.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libQt5Core.so<span style=color:#bd93f9>.5</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libEGL.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libpthread.so<span style=color:#bd93f9>.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libstdc<span style=color:#ff79c6>++</span>.so<span style=color:#bd93f9>.6</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libgcc_s.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libc.so<span style=color:#bd93f9>.6</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libdrm.so<span style=color:#bd93f9>.2</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libOpenCL.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libm.so<span style=color:#bd93f9>.6</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libGLESv2.so<span style=color:#bd93f9>.2</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libpng16.so<span style=color:#bd93f9>.16</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libz.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libudev.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libpcre2<span style=color:#ff79c6>-</span><span style=color:#bd93f9>16.</span>so<span style=color:#bd93f9>.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libdl.so<span style=color:#bd93f9>.2</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libglib<span style=color:#ff79c6>-</span><span style=color:#bd93f9>2.0</span>.so<span style=color:#bd93f9>.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libGAL.so
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libwayland<span style=color:#ff79c6>-</span>server.so<span style=color:#bd93f9>.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libwayland<span style=color:#ff79c6>-</span>client.so<span style=color:#bd93f9>.0</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libgbm.so
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libgbm_viv.so
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libVSC.so
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span><span style=color:#ff79c6>--</span>Type <span style=color:#ff79c6>&lt;</span>RET<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>for</span> more, q to quit, c to <span style=color:#ff79c6>continue</span> without paging<span style=color:#ff79c6>--</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>    <span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>librt.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libpcre.so<span style=color:#bd93f9>.1</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span>    <span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>lib<span style=color:#ff79c6>/</span>libffi.so<span style=color:#bd93f9>.7</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>__GI__dl_debug_state () at dl<span style=color:#ff79c6>-</span>debug.<span style=color:#8be9fd;font-style:italic>c</span>:<span style=color:#bd93f9>74</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span><span style=color:#bd93f9>74</span>	dl<span style=color:#ff79c6>-</span>debug.<span style=color:#8be9fd;font-style:italic>c</span>: No such file or directory.
</span></span></code></pre></div><h4 id=tcatch>tcatch
<a class=heading-link href=#tcatch><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>catch <span style=color:#ff79c6>&lt;</span>event<span style=color:#ff79c6>&gt;</span>    
</span></span></code></pre></div><blockquote><p>只设置一次捕捉点，当程序停住以后，断点被自动删除。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>info catch
</span></span></code></pre></div><blockquote><p>显示出当前的函数中的异常处理信息。</p></blockquote><h3 id=条件断点>条件断点
<a class=heading-link href=#%e6%9d%a1%e4%bb%b6%e6%96%ad%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=condition>condition
<a class=heading-link href=#condition><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>condition N <span style=color:#ff79c6>&lt;</span>expression<span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>condition N		 <span style=color:#6272a4>// 用于删除编号N断点的条件表达式，使其变成普通的无条件断点
</span></span></span></code></pre></div><blockquote><p>修改断点编号为N的停止条件为expression。（只有break 和 watch命令支持if，catch目前暂不支持if）。</p><p>condition 与break if类似，只是condition只能用在已存在的断点上。</p></blockquote><h3 id=设置快照>设置快照
<a class=heading-link href=#%e8%ae%be%e7%bd%ae%e5%bf%ab%e7%85%a7><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>gdb可以在程序执行的过程中保留快照(状态)信息，称之为checkpoint，可以在进来返回到该处再次查看当时的信息，比如内存、寄存器以及部分系统状态。通过设置checkpoint，万一调试的过程中错误发生了但是已经跳过了错误发生的地方，就可以快速返回checkpoint再开始调试，而不用重启程序重新来过。</p><p>此外，checkpoint的作用还在于断点、观测点不是什么情况下都可用的情况下，因为Linux系统有时候为了安全考虑，会随机化新进程的地址空间，这样重启调试程序会导致之前使用绝对地址设置的断点、观测点不可用。</p></blockquote><h4 id=checkpoint>checkpoint
<a class=heading-link href=#checkpoint><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>checkpoint	<span style=color:#6272a4>// 无参数
</span></span></span></code></pre></div><blockquote><p>创建一个快照，包含当前调试的所有信息。同时会输出这个checkpoint的信息。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>restart N
</span></span></code></pre></div><blockquote><p>回退到指定checkpoint的快照。</p></blockquote><blockquote><p>在调试calwin时添加快照，提示多线程不能设置快照。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) info inferiors
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  Num  Description       Executable        
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>* 1    process 373       /home/root/gdb_test/calwin.out 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>(gdb) checkpoint 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>checkpoint: can&#39;t checkpoint multiple threads.
</span></span></code></pre></div><h2 id=多线程调试>多线程调试
<a class=heading-link href=#%e5%a4%9a%e7%ba%bf%e7%a8%8b%e8%b0%83%e8%af%95><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h4 id=info-inferiors>info inferiors
<a class=heading-link href=#info-inferiors><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>info inferiors
</span></span></code></pre></div><blockquote><p>查询正在调试的进程。</p></blockquote><h4 id=inferior>inferior
<a class=heading-link href=#inferior><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>inferior infno
</span></span></code></pre></div><blockquote><p>使inferior号infno成为当前inferior。</p></blockquote><h4 id=info-threads>info threads
<a class=heading-link href=#info-threads><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>命令缩写是info thr， 显示当前可调试的所有线程，每个线程会有一个gdb为其分配的ID，后面操作线程的时候会用这个ID，前面有*的是当前调试的线程。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) info  threads 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  Id   Target Id                                    Frame 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#ff79c6>*</span> <span style=color:#bd93f9>1</span>    Thread <span style=color:#bd93f9>0xffff9755f530</span> (LWP <span style=color:#bd93f9>265</span>) <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> ImageProvider<span style=color:#ff79c6>::</span>captureAll (
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  this<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xaaaacbd8a890</span>) at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>534</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  <span style=color:#bd93f9>2</span>    Thread <span style=color:#bd93f9>0xffff8ee0b190</span> (LWP <span style=color:#bd93f9>266</span>) <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> ioctl ()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>/</span>ioctl.<span style=color:#8be9fd;font-style:italic>S</span>:<span style=color:#bd93f9>25</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>  <span style=color:#bd93f9>3</span>    Thread <span style=color:#bd93f9>0xffff8e60a190</span> (LWP <span style=color:#bd93f9>267</span>) <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> ioctl ()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>/</span>ioctl.<span style=color:#8be9fd;font-style:italic>S</span>:<span style=color:#bd93f9>25</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  <span style=color:#bd93f9>4</span>    Thread <span style=color:#bd93f9>0xffff8dd70190</span> (LWP <span style=color:#bd93f9>268</span>) <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> ioctl ()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>/</span>ioctl.<span style=color:#8be9fd;font-style:italic>S</span>:<span style=color:#bd93f9>25</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#bd93f9>5</span>    Thread <span style=color:#bd93f9>0xffff8c906190</span> (LWP <span style=color:#bd93f9>269</span>) <span style=color:#f1fa8c>&#34;QThread&#34;</span>    __libc_read (nbytes<span style=color:#ff79c6>=</span><span style=color:#bd93f9>4</span>, 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    buf<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xffff8c905884</span>, fd<span style=color:#ff79c6>=</span><span style=color:#bd93f9>12</span>) at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>read.<span style=color:#8be9fd;font-style:italic>c</span>:<span style=color:#bd93f9>26</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  <span style=color:#bd93f9>6</span>    Thread <span style=color:#bd93f9>0xffff7f1ef190</span> (LWP <span style=color:#bd93f9>270</span>) <span style=color:#f1fa8c>&#34;calwin.out&#34;</span> ioctl ()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>/</span>ioctl.<span style=color:#8be9fd;font-style:italic>S</span>:<span style=color:#bd93f9>25</span>
</span></span></code></pre></div><h4 id=thread>thread
<a class=heading-link href=#thread><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>thread</span> threadID
</span></span></code></pre></div><blockquote><p>切换调试程序的线程。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6>thread</span> apply <span style=color:#ff79c6>&lt;</span>threadno<span style=color:#ff79c6>/</span>all<span style=color:#ff79c6>&gt;</span> bt
</span></span></code></pre></div><blockquote><p>打开指定/所有线程的堆栈信息。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set scheduler<span style=color:#ff79c6>-</span>locking <span style=color:#ff79c6>&lt;</span>off<span style=color:#ff79c6>/</span>on<span style=color:#ff79c6>/</span>step<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>在调试多线程程序时，使用step或者continue命令调试当前线程时，其它线程也在并发执行，这个命令可以通过off|on|step来控制线程的执行，即：</p><p>off：不锁定任何线程，即所有线程都执行，这是默认值。</p><p>on：只有当前被调试程序会被执行。</p><p>step：在单步的时候，除了next过一个函数的情况以外，只有当前线程会执行</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set print <span style=color:#ff79c6>thread</span><span style=color:#ff79c6>-</span>events <span style=color:#ff79c6>&lt;</span>on<span style=color:#ff79c6>/</span>off<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>用于设定是否提示线程启动或停止时的信息。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>set follow<span style=color:#ff79c6>-</span>fork<span style=color:#ff79c6>-</span>mode <span style=color:#ff79c6>&lt;</span>parent<span style=color:#ff79c6>/</span>child<span style=color:#ff79c6>&gt;</span>
</span></span></code></pre></div><blockquote><p>在fork或vfork产生子进程时，选择跟踪父/ 子进程：
parent ：默认情况，当一个程序fork时，GDB仍继续调试原进程，子进程的运行没有任何影响。
child ：GDB调试新进程，父进程不受影响的运行。</p></blockquote><hr><h2 id=coredump调试>coredump调试
<a class=heading-link href=#coredump%e8%b0%83%e8%af%95><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><blockquote><p>Coredump叫做核心转储，它是进程运行时在突然崩溃的那一刻的一个内存快照。操作系统在程序发生异常而异常在进程内部又没有被捕获的情况下，会把进程此刻内存、寄存器状态、运行堆栈等信息转储保存在一个文件里。一般coredump文件产生的原因有空指针、数组越界、多线程多次释放、堆栈溢出等等。</p></blockquote><h3 id=1相关gdb指令>1、相关gdb指令
<a class=heading-link href=#1%e7%9b%b8%e5%85%b3gdb%e6%8c%87%e4%bb%a4><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=generate-core-file>generate-core-file
<a class=heading-link href=#generate-core-file><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>生成core文件，生成与否受core file size 的资源限制。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># myprogram
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6></span>Segmentation fault (core dumped)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ff79c6># gdb myprogram
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ff79c6></span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>(gdb) generate<span style=color:#ff79c6>-</span>core<span style=color:#ff79c6>-</span>file core
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>(gdb) core<span style=color:#ff79c6>-</span>file core
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>...
</span></span></code></pre></div><h4 id=core-file>core-file
<a class=heading-link href=#core-file><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>加载core文件，有点类似于file，但是file指令不能加载core文件。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>(gdb) file  core_calwin 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#f1fa8c>&#34;/home/root/gdb_test/core_calwin&#34;</span><span style=color:#ff79c6>:</span> not in executable <span style=color:#8be9fd;font-style:italic>format</span>: file format not recognized
</span></span></code></pre></div><h3 id=2core文件设置>2、core文件设置
<a class=heading-link href=#2core%e6%96%87%e4%bb%b6%e8%ae%be%e7%bd%ae><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=21设置core文件生成>2.1、设置core文件生成
<a class=heading-link href=#21%e8%ae%be%e7%bd%aecore%e6%96%87%e4%bb%b6%e7%94%9f%e6%88%90><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><blockquote><p>使用ulimit -c命令可查看core文件的生成开关，若结果为0，则便是关闭了此功能，不会生成core文件。这个限制默认为 0，需要调节 ulimit 中对 core file size 的资源限制。</p></blockquote><p>（1）使用命令ulimit -c filesize命令</p><blockquote><p>若ulimit -c unlimited 则标识此core文件的大小不受限制；若指定filesize，如果生成的信息超过此大小，将会被裁剪，最终生成一个不完整的core文件，在调试此core文件时，gdb会提示错误。</p></blockquote><p>（2）但是若想整个系统中生效则在 shell里面设置是不行的，方法如下：</p><blockquote><p>修改 /root/.bash_profile文件，在其中加入ulitmit -S -c unlimited</p><p>source /root/.bash_profile</p></blockquote><p>实现永久修改，打开**/etc/security/limits.conf** 文件，在该文件的最后加上两行：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># vi /etc/security/limits.conf 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6></span>@root soft core unlimited
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>@root hard core unlimited
</span></span></code></pre></div><h4 id=22设置core文件格式>2.2、设置core文件格式
<a class=heading-link href=#22%e8%ae%be%e7%bd%aecore%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>（1）<strong>/proc/sys/kernel/core_uses_pid</strong></p><blockquote><p>可以控制core文件的问价名是否添加PID作为扩展，文件的内容为1，标识添加PID作为扩展，生成的core文件格式为core.XXXX；为0则表示生成的core文件统一命名为core。</p><p>可通过一下命令修改此文件：</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>echo <span style=color:#bd93f9>1</span> <span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>/</span>proc<span style=color:#ff79c6>/</span>sys<span style=color:#ff79c6>/</span>kernel<span style=color:#ff79c6>/</span>core_uses_pid
</span></span></code></pre></div><p>（2）<strong>/proc/sys/kernel/core_pattern</strong></p><blockquote><p>可以设置文件的保存位置和文件名格式，以下是core_pattern参数列表:</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span> <span style=color:#ff79c6>%</span>p <span style=color:#ff79c6>-</span> insert pid into filename 添加pid 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span> <span style=color:#ff79c6>%</span>u <span style=color:#ff79c6>-</span> insert current uid into filename 添加当前uid 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span> <span style=color:#ff79c6>%</span>g <span style=color:#ff79c6>-</span> insert current gid into filename 添加当前gid 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span> <span style=color:#ff79c6>%</span>s <span style=color:#ff79c6>-</span> insert signal that caused the coredump into the filename 添加导致产生core的信号
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span> <span style=color:#ff79c6>%</span>t <span style=color:#ff79c6>-</span> insert UNIX time that the coredump occurred into filename 添加core文件生成的unix时间
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span> <span style=color:#ff79c6>%</span>h <span style=color:#ff79c6>-</span> insert hostname where the coredump happened into filename 添加主机名 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span> <span style=color:#ff79c6>%</span>e <span style=color:#ff79c6>-</span> insert coredumping executable name into filename 添加命令名 
</span></span></code></pre></div><blockquote><p>如下命令可以将core文件统一生成到/usr/core_file目录下，产生的文件名为core_filename_time_pid格式。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>echo <span style=color:#ff79c6>/</span>var<span style=color:#ff79c6>/</span>core_log<span style=color:#ff79c6>/</span>core_<span style=color:#ff79c6>%</span>e_<span style=color:#ff79c6>%</span>t_<span style=color:#ff79c6>%</span>p <span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>/</span>proc<span style=color:#ff79c6>/</span>sys<span style=color:#ff79c6>/</span>kernel<span style=color:#ff79c6>/</span>core_pattern
</span></span></code></pre></div><blockquote><p>设置完成之后，coredump文件就不会被覆盖了。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# ls <span style=color:#ff79c6>/</span>var<span style=color:#ff79c6>/</span>core_log<span style=color:#ff79c6>/</span> <span style=color:#ff79c6>-</span>l
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>total <span style=color:#bd93f9>111652</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ff79c6>-</span>rw<span style=color:#ff79c6>-------</span> <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>70430720</span> May <span style=color:#bd93f9>27</span> <span style=color:#bd93f9>02</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>38</span> core_QThread_1590547134_398
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ff79c6>-</span>rw<span style=color:#ff79c6>-------</span> <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>70430720</span> May <span style=color:#bd93f9>27</span> <span style=color:#bd93f9>02</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>39</span> core_QThread_1590547142_406
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#ff79c6>-</span>rw<span style=color:#ff79c6>-------</span> <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>75239424</span> May <span style=color:#bd93f9>27</span> <span style=color:#bd93f9>02</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>39</span> core_QThread_1590547146_412
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#ff79c6>-</span>rw<span style=color:#ff79c6>-------</span> <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>75149312</span> May <span style=color:#bd93f9>27</span> <span style=color:#bd93f9>02</span><span style=color:#ff79c6>:</span><span style=color:#bd93f9>39</span> core_QThread_1590547149_418
</span></span></code></pre></div><p>实现永久修改，打开**/etc/sysctl.conf** 文件，在该文件的最后加上两行：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># vi /etc/sysctl.conf 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ff79c6></span>kernel.core_pattern <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>/</span>var<span style=color:#ff79c6>/</span>core_log<span style=color:#ff79c6>/</span>core_<span style=color:#ff79c6>%</span>e_<span style=color:#ff79c6>%</span>t_<span style=color:#ff79c6>%</span>p
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>kernel.core_uses_pid <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
</span></span></code></pre></div><blockquote><p>可以使用以下命令，使修改结果马上生效。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#ff79c6># sysctl –p
</span></span></span></code></pre></div><h3 id=3关于gdb调试core文件显示问号的问题>3、关于gdb调试core文件显示问号的问题
<a class=heading-link href=#3%e5%85%b3%e4%ba%8egdb%e8%b0%83%e8%af%95core%e6%96%87%e4%bb%b6%e6%98%be%e7%a4%ba%e9%97%ae%e5%8f%b7%e7%9a%84%e9%97%ae%e9%a2%98><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>（1）core file size设置小了，导致生成的core文件不全；</p><p>（2）调试的程序没有被载入，或者载入的程序没有调试信息；</p></blockquote><h4 id=31core文件不全>3.1、core文件不全
<a class=heading-link href=#31core%e6%96%87%e4%bb%b6%e4%b8%8d%e5%85%a8><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>（1）设置core file size为10240个block大小。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# ulimit <span style=color:#ff79c6>-</span>c <span style=color:#bd93f9>10240</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# gdb <span style=color:#ff79c6>-</span>q  calwin.out core        
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>Reading symbols from calwin.out...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#8be9fd;font-style:italic>BFD</span>: <span style=color:#8be9fd;font-style:italic>warning</span>: <span style=color:#ff79c6>/</span>home<span style=color:#ff79c6>/</span>root<span style=color:#ff79c6>/</span>gdb_test<span style=color:#ff79c6>/</span>core is <span style=color:#8be9fd;font-style:italic>truncated</span>: expected core file size <span style=color:#ff79c6>&gt;=</span> <span style=color:#bd93f9>70430720</span>, <span style=color:#8be9fd;font-style:italic>found</span>: <span style=color:#bd93f9>5836800</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#8be9fd;font-style:italic>warning</span>: exec file is newer than core file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>[New LWP <span style=color:#bd93f9>255</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>[New LWP <span style=color:#bd93f9>252</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>[New LWP <span style=color:#bd93f9>256</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>[New LWP <span style=color:#bd93f9>251</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>[New LWP <span style=color:#bd93f9>253</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>[New LWP <span style=color:#bd93f9>254</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>Cannot access memory at address <span style=color:#bd93f9>0xffff8b78c170</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>Cannot access memory at address <span style=color:#bd93f9>0xffff8b78c168</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Failed to read a valid object file image from memory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>Core was generated by `.<span style=color:#ff79c6>/</span>calwin.out&#39;.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#ff79c6>#0  0x0000ffff8b712db4 in ?? ()
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#ff79c6></span>[Current <span style=color:#ff79c6>thread</span> is <span style=color:#bd93f9>1</span> (LWP <span style=color:#bd93f9>255</span>)]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>(gdb) 
</span></span></code></pre></div><blockquote><p>可以看到core file被缩短，定位的错误位置显示“？？”，没有显示具体定位。</p></blockquote><p>（2）设置core file size为10240个block大小。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# ulimit <span style=color:#ff79c6>-</span>c <span style=color:#bd93f9>102400</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# gdb <span style=color:#ff79c6>-</span>q calwin.out core 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>Reading symbols from calwin.out...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#8be9fd;font-style:italic>warning</span>: exec file is newer than core file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>[New LWP <span style=color:#bd93f9>285</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>[New LWP <span style=color:#bd93f9>282</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>[New LWP <span style=color:#bd93f9>286</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>[New LWP <span style=color:#bd93f9>283</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>[New LWP <span style=color:#bd93f9>284</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>[New LWP <span style=color:#bd93f9>281</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>[Thread debugging using libthread_db enabled]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>Using host libthread_db library <span style=color:#f1fa8c>&#34;/lib/libthread_db.so.1&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>Core was generated by `.<span style=color:#ff79c6>/</span>calwin.out&#39;.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#ff79c6>#0  memset (__len=88, __ch=0, __dest=0x40) at /opt/fsl-imx-xwayland/5.4-zeus/sysroots/aarch64-poky-linux/usr/include</span><span style=color:#ff79c6>/bits/string_fortified.h:71</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#ff79c6></span><span style=color:#bd93f9>71</span>	<span style=color:#ff79c6>/</span>opt<span style=color:#ff79c6>/</span>fsl<span style=color:#ff79c6>-</span>imx<span style=color:#ff79c6>-</span>xwayland<span style=color:#ff79c6>/</span><span style=color:#bd93f9>5.4</span><span style=color:#ff79c6>-</span>zeus<span style=color:#ff79c6>/</span>sysroots<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>-</span>poky<span style=color:#ff79c6>-</span>linux<span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>include<span style=color:#ff79c6>/</span>bits<span style=color:#ff79c6>/</span>string_fortified.<span style=color:#8be9fd;font-style:italic>h</span>: No such file or directory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>[Current <span style=color:#ff79c6>thread</span> is <span style=color:#bd93f9>1</span> (Thread <span style=color:#bd93f9>0xffff7b1ef190</span> (LWP <span style=color:#bd93f9>285</span>))]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>(gdb) 
</span></span></code></pre></div><blockquote><p>可以看到“core is truncated”的错误没有了，段错误定位到的函数位置不是显示“？？”，而是直接定位到出错的函数“<strong><code>memset (__len=88, __ch=0, __dest=0x40)</code></strong>”，及对应的文件位置。</p></blockquote><p>查看函数回溯：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) bt 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#ff79c6>#0  memset (__len=88, __ch=0, __dest=0x40)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#ff79c6></span>    at <span style=color:#ff79c6>/</span>opt<span style=color:#ff79c6>/</span>fsl<span style=color:#ff79c6>-</span>imx<span style=color:#ff79c6>-</span>xwayland<span style=color:#ff79c6>/</span><span style=color:#bd93f9>5.4</span><span style=color:#ff79c6>-</span>zeus<span style=color:#ff79c6>/</span>sysroots<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>-</span>poky<span style=color:#ff79c6>-</span>linux<span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>include<span style=color:#ff79c6>/</span>bits<span style=color:#ff79c6>/</span>string_fortified.<span style=color:#8be9fd;font-style:italic>h</span>:<span style=color:#bd93f9>71</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#ff79c6>#1  V4l2DevBufferPrepare (video_ch=0xffff640051f0)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#6272a4>//source/v4l2/multi_plane/src_v4l2.c:264
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#6272a4></span><span style=color:#ff79c6>#2  V4L2DevStreamOn (video_ch=0xffff640051f0)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#6272a4>//source/v4l2/multi_plane/src_v4l2.c:507
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#6272a4></span><span style=color:#ff79c6>#3  0x0000aaaab0a05190 in V4L2Camera::startCapture (this=&lt;optimized out&gt;)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>v4l2camera.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>156</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ff79c6>#4  0x0000aaaab0a01184 in ImageProvider::openCameras (
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ff79c6></span>    this<span style=color:#ff79c6>=</span>this@entry<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xaaaaea5d2890</span>, camera<span style=color:#ff79c6>=&lt;</span>optimized out<span style=color:#ff79c6>&gt;</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>232</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#ff79c6>#5  0x0000aaaab0a01704 in ImageProvider::openMax9286 (this=0xaaaaea5d2890)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>432</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#ff79c6>#6  0x0000aaaab0a02318 in CameraMonitorThread::run (this=0xaaaaea6b4630)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#ff79c6>/</span>src<span style=color:#ff79c6>/</span>imageprovider.<span style=color:#8be9fd;font-style:italic>cpp</span>:<span style=color:#bd93f9>28</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#ff79c6>#7  0x0000ffff84868340 in ?? () from /usr/lib/libQt5Core.so.5
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#ff79c6>#8  0x0000ffff8470c8f8 in start_thread (arg=0xfffffe432866)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#ff79c6></span>    at pthread_create.<span style=color:#8be9fd;font-style:italic>c</span>:<span style=color:#bd93f9>479</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#ff79c6>#9  0x0000ffff84464a7c in thread_start ()
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#ff79c6></span>    at ..<span style=color:#ff79c6>/</span>sysdeps<span style=color:#ff79c6>/</span>unix<span style=color:#ff79c6>/</span>sysv<span style=color:#ff79c6>/</span>linux<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>/</span>clone.<span style=color:#8be9fd;font-style:italic>S</span>:<span style=color:#bd93f9>78</span>
</span></span></code></pre></div><blockquote><p>可以定位到错误位置为：</p><p><strong><code>..//source/v4l2/multi_plane/src_v4l2.c:264</code></strong> 文件的 **<code>V4l2DevBufferPrepare</code>**函数。</p></blockquote><p>查看对应源码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#ff79c6>static</span> <span style=color:#8be9fd>int</span> <span style=color:#50fa7b>V4l2DevBufferPrepare</span>(<span style=color:#ff79c6>struct</span> video_channel <span style=color:#ff79c6>*</span>video_ch)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    <span style=color:#8be9fd>int</span> fd <span style=color:#ff79c6>=</span> video_ch<span style=color:#ff79c6>-&gt;</span>v4l2_fd;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#ff79c6>struct</span> v4l2_buffer <span style=color:#ff79c6>*</span>buf;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#ff79c6>for</span> (<span style=color:#8be9fd>unsigned</span> <span style=color:#8be9fd>int</span> i<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0</span>; i<span style=color:#ff79c6>&lt;</span>video_ch<span style=color:#ff79c6>-&gt;</span>buffer_num; i<span style=color:#ff79c6>++</span>)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>        buf <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>video_ch<span style=color:#ff79c6>-&gt;</span>v4l_buffers[i].capture_buffer;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        memset(buf, <span style=color:#bd93f9>0</span>, <span style=color:#ff79c6>sizeof</span>(<span style=color:#ff79c6>struct</span> v4l2_buffer));		<span style=color:#6272a4>// 错误所在264行
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#6272a4></span>...
</span></span></code></pre></div><blockquote><p>最终定位**<code>video_ch->v4l_buffers</code>** 没有初始化导致空指针段错误。</p><p>问题原因：应用代码不够严谨，未对**<code>V4L2Camera::init()</code>**的返回值进行判断。</p></blockquote><p>上述段错误复现方法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# .<span style=color:#ff79c6>/</span>calwin.out <span style=color:#ff79c6>&amp;</span>	<span style=color:#6272a4>// 第一次后台执行
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#6272a4></span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>[<span style=color:#bd93f9>1590546352</span> <span style=color:#ff79c6>:</span> <span style=color:#bd93f9>583</span>] <span style=color:#ff79c6>=========</span> open finished <span style=color:#ff79c6>=======</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#ff79c6>======</span> App <span style=color:#ff79c6>======</span> readMax9286_event<span style=color:#ff79c6>!!!</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# .<span style=color:#ff79c6>/</span>calwin.out	<span style=color:#6272a4>// 第二次没有kill上一次运行的calwin进程，继续执行一次
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#6272a4></span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>[ <span style=color:#bd93f9>9557.898687</span>] isi<span style=color:#ff79c6>-</span>capture <span style=color:#bd93f9>58100000.</span><span style=color:#8be9fd;font-style:italic>isi</span>:<span style=color:#8be9fd;font-style:italic>cap_device</span>:  drivers<span style=color:#ff79c6>/</span>staging<span style=color:#ff79c6>/</span>media<span style=color:#ff79c6>/</span>imx<span style=color:#ff79c6>/</span>imx8<span style=color:#ff79c6>-</span>isi<span style=color:#ff79c6>-</span>cap.<span style=color:#8be9fd;font-style:italic>c</span>: <span style=color:#8be9fd;font-style:italic>mxc_isi_cap_s_fmt_mplane</span>: vb2_queue has no buffers allocated.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#8be9fd;font-style:italic>OpenV4L2Dev</span>: open camera <span style=color:#ff79c6>/</span>dev<span style=color:#ff79c6>/</span>video3 successfully 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span> <span style=color:#ff79c6>-------</span> V4L2Camera<span style=color:#ff79c6>::</span>init <span style=color:#ff79c6>/</span>dev<span style=color:#ff79c6>/</span>video3 <span style=color:#ff79c6>-----</span> start 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span> <span style=color:#ff79c6>-------</span> InitV4L2Dev <span style=color:#ff79c6>/</span>dev<span style=color:#ff79c6>/</span>video3 <span style=color:#ff79c6>-----</span> start 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#8be9fd;font-style:italic>VIDIOC_S_FMT</span>: width<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1280</span>, height<span style=color:#ff79c6>=</span><span style=color:#bd93f9>720</span>, pixelformat<span style=color:#ff79c6>=</span>YUYV
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#ff79c6>/</span>dev<span style=color:#ff79c6>/</span>video3 VIDIOC_S_FMT <span style=color:#8be9fd;font-style:italic>error</span>: format YUYV not supported
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Init V4L2 Device fail 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#ff79c6>======================</span> startCaptureCameras front 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span> <span style=color:#ff79c6>-------</span> V4L2DevStreamOn <span style=color:#ff79c6>/</span>dev<span style=color:#ff79c6>/</span>video0 <span style=color:#ff79c6>-----</span> start 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>[ <span style=color:#bd93f9>9558.294810</span>] <span style=color:#8be9fd;font-style:italic>max9286_set_power</span>:<span style=color:#bd93f9>1870</span><span style=color:#ff79c6>:</span> close video device <span style=color:#ff79c6>--</span> <span style=color:#bd93f9>4</span> <span style=color:#ff79c6>--</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>[ <span style=color:#bd93f9>9558.301323</span>] ###### max9286_dev_close 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>Segmentation fault (core dumped)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# 
</span></span></code></pre></div><h4 id=32程序未加载>3.2、程序未加载
<a class=heading-link href=#32%e7%a8%8b%e5%ba%8f%e6%9c%aa%e5%8a%a0%e8%bd%bd><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>（1）手动生成core文件并调试，段错误可以正常定位。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>Thread <span style=color:#bd93f9>5</span> <span style=color:#f1fa8c>&#34;QThread&#34;</span> received signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>[Switching to Thread <span style=color:#bd93f9>0xffffe94b8190</span> (LWP <span style=color:#bd93f9>321</span>)]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>V4l2DevBufferPrepare (video_ch<span style=color:#ff79c6>=</span><span style=color:#bd93f9>0xffffd40051f0</span>) at ..<span style=color:#6272a4>//source/v4l2/multi_plane/src_v4l2.c:264
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#6272a4></span><span style=color:#bd93f9>264</span>	..<span style=color:#6272a4>//source/v4l2/multi_plane/src_v4l2.c: No such file or directory.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#6272a4></span>(gdb) generate<span style=color:#ff79c6>-</span>core<span style=color:#ff79c6>-</span>file core_calwin
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>Saved corefile core_calwin
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>(gdb) core<span style=color:#ff79c6>-</span>file core_calwin 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>A program is being debugged already.  Kill it<span style=color:#ff79c6>?</span> (y or n) y
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>[ <span style=color:#bd93f9>1359.267865</span>] <span style=color:#8be9fd;font-style:italic>max9286_set_power</span>:<span style=color:#bd93f9>1870</span><span style=color:#ff79c6>:</span> close video device <span style=color:#ff79c6>--</span> <span style=color:#bd93f9>4</span> <span style=color:#ff79c6>--</span> 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>[ <span style=color:#bd93f9>1359.275308</span>] ###### max9286_dev_close 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#8be9fd;font-style:italic>warning</span>: exec file is newer than core file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>[New LWP <span style=color:#bd93f9>321</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>[New LWP <span style=color:#bd93f9>315</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>[New LWP <span style=color:#bd93f9>318</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>[New LWP <span style=color:#bd93f9>319</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>[New LWP <span style=color:#bd93f9>320</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>[New LWP <span style=color:#bd93f9>322</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>[Thread debugging using libthread_db enabled]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>Using host libthread_db library <span style=color:#f1fa8c>&#34;/lib/libthread_db.so.1&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>Core was generated by `<span style=color:#ff79c6>/</span>home<span style=color:#ff79c6>/</span>root<span style=color:#ff79c6>/</span>gdb_test<span style=color:#ff79c6>/</span>calwin.out&#39;.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#ff79c6>#0  memset (__len=88, __ch=0, __dest=0x40) at /opt/fsl-imx-xwayland/5.4-zeus/sysroots/aarch64-poky-linux/usr/include</span><span style=color:#ff79c6>/bits/string_fortified.h:71</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#ff79c6></span><span style=color:#bd93f9>71</span>	<span style=color:#ff79c6>/</span>opt<span style=color:#ff79c6>/</span>fsl<span style=color:#ff79c6>-</span>imx<span style=color:#ff79c6>-</span>xwayland<span style=color:#ff79c6>/</span><span style=color:#bd93f9>5.4</span><span style=color:#ff79c6>-</span>zeus<span style=color:#ff79c6>/</span>sysroots<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>-</span>poky<span style=color:#ff79c6>-</span>linux<span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>include<span style=color:#ff79c6>/</span>bits<span style=color:#ff79c6>/</span>string_fortified.<span style=color:#8be9fd;font-style:italic>h</span>: No such file or directory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>[Current <span style=color:#ff79c6>thread</span> is <span style=color:#bd93f9>1</span> (Thread <span style=color:#bd93f9>0xffffe94b8190</span> (LWP <span style=color:#bd93f9>321</span>))]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>(gdb) 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>root@<span style=color:#8be9fd;font-style:italic>baolong</span>:<span style=color:#ff79c6>~/</span>gdb_test# ls <span style=color:#ff79c6>-</span>l calwin.out 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span><span style=color:#ff79c6>-</span>rwxr<span style=color:#ff79c6>-</span>xr<span style=color:#ff79c6>-</span>x <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>2869584</span> Apr <span style=color:#bd93f9>15</span>  <span style=color:#bd93f9>2022</span> calwin.out
</span></span></code></pre></div><p>（2）直接调试core文件，会显示“？？”，因为没有对应的调试信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) core<span style=color:#ff79c6>-</span>file core_calwin 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>[New LWP <span style=color:#bd93f9>321</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>[New LWP <span style=color:#bd93f9>315</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>[New LWP <span style=color:#bd93f9>318</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>[New LWP <span style=color:#bd93f9>319</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>[New LWP <span style=color:#bd93f9>320</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>[New LWP <span style=color:#bd93f9>322</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>Core was generated by `<span style=color:#ff79c6>/</span>home<span style=color:#ff79c6>/</span>root<span style=color:#ff79c6>/</span>gdb_test<span style=color:#ff79c6>/</span>calwin.out&#39;.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ff79c6>#0  0x0000fffff7f85db4 in ?? ()
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ff79c6></span>[Current <span style=color:#ff79c6>thread</span> is <span style=color:#bd93f9>1</span> (LWP <span style=color:#bd93f9>321</span>)]
</span></span></code></pre></div><p>（3）重新加载core_calwin对应的程序后，再调试core_calwin文件，对应的"？？&ldquo;解决。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>(gdb) file  calwin.out 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#8be9fd;font-style:italic>warning</span>: exec file is newer than core file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>Reading symbols from calwin.out...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>(gdb) 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>(gdb) core<span style=color:#ff79c6>-</span>file core_calwin 
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#8be9fd;font-style:italic>warning</span>: exec file is newer than core file.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>[New LWP <span style=color:#bd93f9>321</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>[New LWP <span style=color:#bd93f9>315</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>[New LWP <span style=color:#bd93f9>318</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>[New LWP <span style=color:#bd93f9>319</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>[New LWP <span style=color:#bd93f9>320</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>[New LWP <span style=color:#bd93f9>322</span>]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>[Thread debugging using libthread_db enabled]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>Using host libthread_db library <span style=color:#f1fa8c>&#34;/lib/libthread_db.so.1&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Core was generated by `<span style=color:#ff79c6>/</span>home<span style=color:#ff79c6>/</span>root<span style=color:#ff79c6>/</span>gdb_test<span style=color:#ff79c6>/</span>calwin.out&#39;.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>Program terminated with signal SIGSEGV, Segmentation fault.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#ff79c6>#0  memset (__len=88, __ch=0, __dest=0x40) at /opt/fsl-imx-xwayland/5.4-zeus/sysroots/aarch64-poky-linux/usr/include</span><span style=color:#ff79c6>/bits/string_fortified.h:71</span><span style=color:#ff79c6>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#ff79c6></span><span style=color:#bd93f9>71</span>	<span style=color:#ff79c6>/</span>opt<span style=color:#ff79c6>/</span>fsl<span style=color:#ff79c6>-</span>imx<span style=color:#ff79c6>-</span>xwayland<span style=color:#ff79c6>/</span><span style=color:#bd93f9>5.4</span><span style=color:#ff79c6>-</span>zeus<span style=color:#ff79c6>/</span>sysroots<span style=color:#ff79c6>/</span>aarch64<span style=color:#ff79c6>-</span>poky<span style=color:#ff79c6>-</span>linux<span style=color:#ff79c6>/</span>usr<span style=color:#ff79c6>/</span>include<span style=color:#ff79c6>/</span>bits<span style=color:#ff79c6>/</span>string_fortified.<span style=color:#8be9fd;font-style:italic>h</span>: No such file or directory.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>[Current <span style=color:#ff79c6>thread</span> is <span style=color:#bd93f9>1</span> (Thread <span style=color:#bd93f9>0xffffe94b8190</span> (LWP <span style=color:#bd93f9>321</span>))]
</span></span></code></pre></div><h1 id=参考资料>参考资料：
<a class=heading-link href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>GDB文档下载：<a href=https://sourceware.org/gdb/current/onlinedocs/>GDB: The GNU Project Debugger</a></p><p>网页版书籍：<a href=https://sourceware.org/gdb/current/onlinedocs/gdb/>Debugging with GDB</a></p><p><a href=http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html>RMS&rsquo;s gdb Debugger Tutorial</a></p><p><a href=https://blog.csdn.net/haoel/category_9197.html>编程工具</a>专栏文章之<a href=https://haoel.blog.csdn.net/article/details/2879>《用GDB调试程序》</a>系列</p><p><a href=https://blog.csdn.net/weixin_39465823/category_9286998.html>makefile和gdb学习</a>专栏文章之<a href=https://guoyanzhang.blog.csdn.net/article/details/85340708>《gdb学习》</a>系列</p><p><a href="https://blog.csdn.net/sunxiaopengsun/article/details/72974548?utm_source=copy">gdb调试coredump（使用篇）</a></p></div><footer><section class=see-also><h3 id=see-also-in-kernel>See also in kernel
<a class=heading-link href=#see-also-in-kernel><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><nav><ul><li><a href=/posts/300/>底层BSP中添加gdb调试功能支持</a></li><li><a href=/posts/205/>S32V编译内核模块</a></li><li><a href=/posts/206/>S32V启动日志分析</a></li></ul></nav></section><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("colorscheme");getTheme=getTheme??"preferred-color-scheme";let theme=getTheme==="dark"?"github-dark":"github-light",s=document.createElement("script");s.src="https://utteranc.es/client.js",s.setAttribute("repo","shuiyuehd/blog-comment"),s.setAttribute("issue-term","pathname"),s.setAttribute("theme",theme),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></footer></article></section></div><footer class=footer><section class=container>©
2022
shuiyuehd
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script></body></html>